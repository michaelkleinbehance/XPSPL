<!DOCTYPE html>
<head>
<title>
    Prggmr v0.2.0 API Documentation
</title>
<link href="style.css" type="text/css" rel="stylesheet" media="all" />
<link href="js/google-code-prettify/prettify.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="js/google-code-prettify/prettify.js"></script>
</head>
<body onload="prettyPrint()">
<h1>
    Prggmr Documentation &amp; Manual v0.2.0
</h1>
<a href="index.html">Index</a> | <a href="api.html">API</a> | <a href="engine.html">Engine</a> | <a href="event.html">Event</a> |
<a href="signal.html">Signals</a> | <a href="queue.html">Queue</a>
<h2>
    Prggmr API
</h2>
<p>
    prggmr's API has been designed to provide php functions that wrap
    directly into a global engine, which with any luck should allow most
    users to use prggmr as just another core set of php functions and never have
    the need to instantiate an object until you get into some of the more advanced aspects of
    developing with prggmr.
</p>
<h4>
    Before you get started
</h4>
<p>
    prggmr is designed for use both in "web" and "server" applications, certain functions
    require use of the daemon, those that due are detailed.
</p>
<h3 id="api.subscribe">
    subscribe(subscription, signal, [identifier, priority, chain, exhaust])
</h3>
<p>
    Creates a subscription to the given signal.
</p>
<p>
    Returns the <a href="subscription.html#object">subscription</a> object sent to the queue.
</p>
<h4>Parameters</h4>
<ul>
    <li>
        An anoymous function, a <a href="subscription.html#object">Subscription</a> object or a php callable. Refer to <a href="subscription.html">subscriptions</a> for more info.
    </li>
    <li>
        The event signal. Refer to <a href="signal.html">signals</a> for more info.
    </li>
    <li>
        A string used for later identifing the subscription, if not provided a random integer will be generated, and so the ability to identify this subscription will be lost.
    </li>
    <li>
        Integer in ASC order which determains the firing order in queue.
    </li>
    <li>
        Signal to chain once this subscription completes. Refer to <a href="chains.html#subscriber">chains</a> for more info.
    </li>
    <li>
        The number of times this subscription will fire before being dumped. Defaults to 0 (infinte).
    </li>
</ul>
<h4>Examples</h4>
<h5>Standard Subscription</h5>
<p>
    Note that a subscription will always be passed an <a href="event.html">Event</a> as the first parameter.
</p>
<div class="code">
<pre class="prettyprint php">
// subscribe to the "hello.world" event
subscribe(function($event){
    echo "HelloWorld";
}, "helloworld");
</pre>
</div>
<h5>
    Subscribing with object constants
</h5>
<p>
    Using object constants for string signals is highly recommended.
</p>
<div class="code">
<pre class="prettyprint php">
subscribe(function($event){
    echo "HelloWorld";
}, Signals::HELLOWORLD);
</pre>
</div>
</div>
<h3 id="api.once">
    once(subscription, signal, [identifier, priority, chain])
</h3>
<p>
    Creates a subscription that will expire after a single call, by setting a default exhaust of 1.
</p>
<p>
    Refer to <a href="api.html#api.subscribe">subscribe</a> for more information.
</p>
<h4>Example</h4>
<div class="code">
<pre class="prettyprint php">
// subscribe to the "hello.world" function
once("hello.world", function($event){
    echo "HelloWorld";
});
</pre>
</div>
<h3 id="api.chain">
    chain(signal, chain)
</h3>
<p>
    Creates a chain between two signals.
</p>
<h4>Parameters</h4>
<ul>
    <li>
        The signal that starts the chain.
    </li>
    <li>
        Signal to be chained.
    </li>
</ul>
<h4>Example</h4>
<div class="code">
<pre class="prettyprint php">
// chain world from signal hello
chain('hello', 'world');
</pre>
</div>
<h3 id="api.dechain">
    dechain(signal, chain)
</h3>
<p>
    Removed a chained link between two signals.
</p>
<h4>Parameters</h4>
<ul>
    <li>
        The signal that starts the chain.
    </li>
    <li>
        Chained signal link to be removed.
    </li>
</ul>
<h4>Example</h4>
<div class="code">
<pre class="prettyprint php">
// remove the chain world from signal hello
dechain('hello', 'world');
</pre>
</div>
<h3 id="api.fire">
    fire(signal, [vars, event])
</h3>
<p>
    Fires a event signal.
</p>
<h4>Parameters</h4>
<ul>
    <li>
        The event signal to fire. Refer to <a href="signal.html">signals</a> for more info.
    </li>
    <li>
        A list of variables to pass the subscription.
        <div class="notice">
            <p>
                This is expected as an array, if passed an array it will interupt it as the variable list.
                To workaround this limitation array parameters must be provided within a parent array if attempting
                to pass an array as a variable on its own.
            </p>
        </div>
        <div class="code">
        <pre class="prettyprint php">
subscribe('test', function($event, $var){
    var_dump($var);
});

// without parent vars recieved as param list
fire('test', array('var1','var2'));

// with parent works as expected
fire('test', array(array('var1', 'var2')));
        </pre>
        </div>
    </li>
    <li>
        event is a <a href="event.html">Event</a> object to use for the event.
    </li>
</ul>
<p>
    Returns an <a href="event.html">Event</a> object.
</p>
<h4>Examples</h4>
<div class="code">
<pre class="prettyprint php">
/**
 * Fire an event with no additional params.
 */
 
// first subscribe
subscribe('HelloWorld', function($event){
    echo "HelloWorld";
}, 'one');

// fire the HelloWorld event
fire('HelloWorld');

// remove the subscriber
dequeue('HelloWorld', 'one');


/**
 * Firing providing the event parameters
 */
 
// Subcribe with multi params
subscribe('HelloWorld', function($event, $param1, $param2){
    echo $param1.$param2;
}, 'params');

// fire HelloWorld passing params
fire('HelloWorld', array('Hello', 'World'));

// remove the subscriber
dequeue('HelloWorld', 'params');


/**
 * Fire using a provided event object
 */
// subscribe for a custom event
subscribe('HelloWorld', function($event){
    echo $event->getData('hello');
});

// inst a new event
$event = new \prggmr\Event();
$event->setData('HelloWorld', 'hello');

// fire with a custom event object as the third param
fire('HelloWorld', null, $event);
</pre>
</div>