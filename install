#!/bin/bash
########################
# Installs prggmr to the php include path
########################
PHPPATH=$(php -r "echo get_include_path();") 
INSTALLPATH=""
BINPATH="/usr/bin"
for x in $(echo $PHPPATH | tr ":" "\n")
do
    if [ "$x" != "." ]; then
        INSTALL_PATH="$x"
        break
    fi
done
if [[ $INSTALL_PATH = "" ]]; then
    echo "Could not find your PHP include path";
    exit;
fi
if [ -d "$INSTALL_PATH/prggmr" ]; then
    rm -rf "$INSTALL_PATH/prggmr"
fi;
echo "Installing prggmr to $INSTALL_PATH/prggmr"
mkdir $INSTALL_PATH/prggmr
cp -Rf * "$INSTALL_PATH/prggmr"
if [ -f "$BINPATH/prggmr" ]; then
    rm "$BINPATH/prggmr"
fi;
echo "Installing the executable prggmr file"
echo "Installed executable to $BINPATH/prggmr"
ln -s "$INSTALL_PATH/prggmr/bin/prggmr" "$BINPATH"
prggmr -v
echo "Installed"
echo "Have fun with prggmr"
echo "Report bugs to https://github.com/prggmr/prggmr/issues"
echo "====================================="
prggmr -h

